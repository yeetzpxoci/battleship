(()=>{var t={404:t=>{function e(t){return{length:t,hitCounter:0,sunk:!1,hit(){this.hitCounter++},isSunk(){return this.length-this.hitCounter==0&&(this.sunk=!0),this.sunk}}}t.exports={Ship:e,Gameboard:function(){return{shipAmount:5,shipLengths:[5,4,3,3,2],board:Array(10).fill(-1).map((t=>Array(10).fill(-1))),currentShipID:0,currentAxis:0,ships:[],attackedCoords:[],canPlaceShipAt(t,e,n,r){if(0==n){for(let n=0;n<r;n++)if(e+n>9||-1!=this.board[t][e+n])return!1}else for(let n=0;n<r;n++)if(t+n>9||-1!=this.board[t+n][e])return!1;return!0},placeShip(t,n,r){const a=this.shipLengths[this.currentShipID];if(this.canPlaceShipAt(t,n,r,a)){const o=e(a);this.ships.push(o);for(let e=0;e<a;e++)0==r?this.board[t][n+e]=this.currentShipID:this.board[t+e][n]=this.currentShipID;this.currentShipID++}},placeShipsRandomly(){for(;!this.readyToPlay();){const t=Math.floor(10*Math.random()),e=Math.floor(10*Math.random()),n=Math.round(Math.random());this.placeShip(t,e,n)}},receiveAttack(t,e){-1!=this.board[t][e]&&(this.ships[this.board[t][e]].hit(),this.board[t][e]=-1),this.attackedCoords.push([t,e])},allShipsSunk(){for(let t=0;t<this.ships.length;t++)if(!this.ships[t].isSunk())return!1;return!0},readyToPlay(){if(this.ships.length==this.shipAmount){for(let t=0;t<this.ships.length;t++)if(0!=this.ships[t].hitCounter)return!1;return!0}return!1}}},Player:function(t){return{gameboard:t,turn:!0,attack(t,e,n){t.gameboard.receiveAttack(e,n),this.turn=!1,t.turn=!0}}}}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}(()=>{"use strict";var t=n(404);const e={placeShip(t,e,n,r){if(0==n&&e+r<=10)for(let n=0;n<r;n++){const r=document.querySelector(`.player-cell[data-row="${t}"][data-column="${e+n}"]`);r.style.backgroundColor="white",r.setAttribute("data-state","placed")}else if(1==n&&t+r<=10)for(let n=0;n<r;n++){const r=document.querySelector(`.player-cell[data-row="${t+n}"][data-column="${e}"]`);r.style.backgroundColor="white",r.setAttribute("data-state","placed")}},placeShipComputer(t){for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)-1!=t[e][n]&&document.querySelector(`.computer-cell[data-row="${e}"][data-column="${n}"]`).setAttribute("data-state","placed")},renderStartPage(){const t=document.createElement("div");t.setAttribute("id","start-content");const e=document.createElement("p");e.setAttribute("id","title"),e.textContent="BATTLESHIP";const n=document.createElement("form");n.setAttribute("id","start-form");const r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("id","name-input"),r.setAttribute("name","name"),r.setAttribute("placeholder","YOUR NAME"),r.setAttribute("required","");const a=document.createElement("button");a.setAttribute("type","submit"),a.setAttribute("id","start-button"),a.textContent="START",n.appendChild(r),n.appendChild(a),t.appendChild(e),t.appendChild(n),document.body.appendChild(t)},renderGamePage(t){const e=document.createElement("div");e.className="score-game-container";const n=document.createElement("div");n.className="score-game-container";const r=document.createElement("div");r.id="game-content";const a=document.createElement("button");a.id="axis-button",a.innerHTML="Horizontal";const o=document.createElement("p");o.innerHTML=t,o.id="player-name";const c=document.createElement("p");c.innerHTML="Computer";const i=document.createElement("p");i.id="message",i.innerText="Place your ships!";const s=document.createElement("div");s.className="gameboard";for(let t=0;t<100;t++){const e=document.createElement("div");e.className="player-cell",e.setAttribute("data-state","empty"),e.setAttribute("data-row",Math.floor(t/10)),e.setAttribute("data-column",t%10),e.addEventListener("mouseover",(function(){this.style.opacity="50%"})),e.addEventListener("mouseleave",(function(){this.style.opacity="100%"})),s.appendChild(e)}const l=document.createElement("div");l.className="gameboard";for(let t=0;t<100;t++){const e=document.createElement("div");e.className="computer-cell",e.setAttribute("data-state","empty"),e.setAttribute("data-row",Math.floor(t/10)),e.setAttribute("data-column",t%10),e.addEventListener("mouseover",(function(){this.style.opacity="50%"})),e.addEventListener("mouseleave",(function(){this.style.opacity="100%"})),l.appendChild(e)}this.resetPage(),e.append(o,s,a),n.append(c,l),r.append(e,n),document.body.append(i,r)},renderEndGame(){const t=document.createElement("div");t.id="end-div";const e=document.createElement("button");e.innerText="Play again",e.id="again-button";const n=document.createElement("button");n.innerText="Back",n.id="back-button",document.body.append(t,e,n)},resetPage(){document.body.innerHTML=""},changeMessage(t){document.querySelector("#message").innerText=t},attack(t,e,n){const r=document.querySelector("."+t+`[data-row="${e}"][data-column="${n}"]`);"placed"===r.dataset.state?r.style.backgroundColor="red":r.style.backgroundColor="green",r.style.pointerEvents="none",r.setAttribute("data-state","attacked")}};function r(){const n=(0,t.Gameboard)();document.querySelector("#axis-button").addEventListener("click",(function(){"Horizontal"===this.innerText?(this.innerText="Vertical",n.currentAxis=1):(this.innerText="Horizontal",n.currentAxis=0)})),document.querySelectorAll(".player-cell").forEach((o=>{o.addEventListener("click",(function(){!function(t,n){const r=parseInt(n.dataset.row),a=parseInt(n.dataset.column);e.placeShip(r,a,t.currentAxis,t.shipLengths[t.currentShipID]),t.placeShip(r,a,t.currentAxis),console.log(t)}(n,this),n.readyToPlay()&&function(n,r){const o=(0,t.Player)(n),c=(0,t.Player)(r);e.changeMessage("START!"),document.querySelectorAll(".computer-cell[data-state=empty]").forEach((t=>{t.addEventListener("click",(()=>a(o,c,t)))})),document.querySelectorAll(".computer-cell[data-state=placed]").forEach((t=>{t.addEventListener("click",(()=>a(o,c,t)))}))}(n,r)})),o.addEventListener("mouseover",(()=>function(t,e){const n=t.shipLengths[t.currentShipID],r=parseInt(e.dataset.row),a=parseInt(e.dataset.column);if(0==t.currentAxis&&a+n<=10)for(let t=0;t<n;t++)document.querySelector(`[data-row="${r}"][data-column="${a+t}"]`).style.backgroundColor="white";else if(1==t.currentAxis&&r+n<=10)for(let t=0;t<n;t++)document.querySelector(`[data-row="${r+t}"][data-column="${a}"]`).style.backgroundColor="white"}(n,o))),o.addEventListener("mouseleave",(function(){document.querySelectorAll(".player-cell[data-state=empty]").forEach((t=>{t.style.backgroundColor=""}))}))}));const r=(0,t.Gameboard)();r.placeShipsRandomly(),e.placeShipComputer(r.board)}function a(t,n,r){const a=r.dataset.row,c=r.dataset.column;t.attack(n,a,c),e.attack("computer-cell",a,c);let i=Math.floor(10*Math.random()),s=Math.floor(10*Math.random());for(;t.gameboard.attackedCoords.some((t=>t[0]===i&&t[1]===s));)i=Math.floor(10*Math.random()),s=Math.floor(10*Math.random());if(n.attack(t,i,s),e.attack("player-cell",i,s),t.gameboard.allShipsSunk())document.querySelector("#message").innerHTML("COMPUTER WON :("),o();else if(n.gameboard.allShipsSunk()){console.log("YOU WON!");const t=document.querySelector("#player-name").innerText;document.querySelector("#message").innerText=t+" WON! :)",o()}}function o(){e.renderEndGame(),document.querySelector("#again-button").addEventListener("click",(function(){const t=document.querySelector("#player-name").innerText;e.resetPage(),e.renderGamePage(t),r()})),document.querySelector("#back-button").addEventListener("click",(function(){e.resetPage(),e.renderStartPage()}))}const c=document.querySelector("#name-input");c.oninvalid=function(){this.setCustomValidity("Please enter your name.")},c.oninput=function(){this.setCustomValidity("")},document.querySelector("#start-button").addEventListener("click",(function(t){if(t.preventDefault(),c.checkValidity()){const t=document.querySelector("#name-input").value;e.renderGamePage(t),r()}else c.reportValidity()}))})()})();